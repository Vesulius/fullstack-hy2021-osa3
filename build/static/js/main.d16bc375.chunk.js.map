{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","personService","getAll","axios","get","then","response","data","add","newPerson","post","remove","id","delete","update","put","updateMessage","setMessage","text","error","setTimeout","List","foundPersons","removePerson","map","person","name","number","onClick","Field","value","changeHandler","onChange","positiveMessageStyle","color","backround","borderStyle","padding","fontStyle","fontSize","negativeMessageStyle","Notification","message","style","Find","search","persons","filter","match","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","searchWord","setSearchWord","setFoundPersons","handleNameChange","event","target","handleNumberChange","useEffect","addPerson","preventDefault","find","updateNumber","concat","catch","window","confirm","returnedPerson","copy","onSubmit","type","removedName","returnData","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d16bc375.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl).then((response) => response.data)\n}\n\nconst add = (newPerson) => {\n  return axios.post(baseUrl, newPerson).then((response) => response.data)\n}\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`).then((response) => response)\n}\n\nconst update = (id, newPerson) => {\n  return axios.put(`${baseUrl}/${id}`, newPerson).then((response) => response)\n}\n\n// Tämä moduuli voitaisiin exportata suoraa mutta silloin react varoittaa: Assign object to a variable before exporting as module default import/no-anonymous-default-export\nconst personService = {\n  getAll,\n  add,\n  remove,\n  update,\n}\n\nexport default personService\n","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchWord, setSearchWord] = useState('')\n  const [foundPersons, setFoundPersons] = useState(persons)\n  const [message, setMessage] = useState(null)\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const handleSearchChange = (event) => {\n    setSearchWord(event.target.value)\n    // tämänhetkinen hakusanan arvo on välitettävä filterille propsien kautta sillä searchword ei ole vielä päivitetty\n    setFoundPersons(Find(event.target.value, persons))\n  }\n\n  useEffect(() => {\n    personService.getAll().then((persons) => {\n      setPersons(persons)\n    })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    if (persons.find((person) => person.name === newName)) {\n      updateNumber()\n      return\n    }\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    }\n\n    personService\n      .add(newPerson)\n      .then((person) => {\n        setPersons(persons.concat(person))\n        // uusi henkilö tulee tässäkin lisätä listaan persons sillä todellista listaa ei olla vielä päivitetty\n        setFoundPersons(Find(searchWord, persons.concat(person)))\n        updateMessage(setMessage, `Added ${newPerson.name}`, false)\n      })\n      .catch((error) => {\n        updateMessage(setMessage, `Couldn't add ${newPerson.name}`, true)\n      })\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const removePerson = (id) => {\n    const removedName = foundPersons.find((person) => person.id === id).name\n    if (window.confirm(`Delete ${removedName}`)) {\n      personService\n        .remove(id)\n        .then((returnData) => {\n          updateMessage(setMessage, `Deleted ${removedName}`, false)\n        })\n        .catch((error) => {\n          updateMessage(\n            setMessage,\n            `Information of  ${removedName} has already been removed from server`,\n            true\n          )\n        })\n      setPersons(persons.filter((person) => person.id !== id))\n      setFoundPersons(foundPersons.filter((person) => person.id !== id))\n    }\n  }\n\n  const updateNumber = () => {\n    if (!window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`)) return\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    }\n    personService\n      .update(persons.find((person) => newName === person.name).id, newPerson)\n      .then((returnedPerson) => {\n        const copy = persons.map((person) =>\n          person.name === returnedPerson.data.name\n            ? returnedPerson.data\n            : person\n        )\n        setPersons(copy)\n        setFoundPersons(Find(searchWord, copy))\n        updateMessage(setMessage, `Updated number of ${newPerson.name}`, false)\n      })\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const Form = () => {\n    return (\n      <form onSubmit={addPerson}>\n        <Field name={'name'} value={newName} changeHandler={handleNameChange} />\n        <Field\n          name={'number'}\n          value={newNumber}\n          changeHandler={handleNumberChange}\n        />\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    )\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Field\n        name={'filter shown with'}\n        value={searchWord}\n        changeHandler={handleSearchChange}\n      />\n      <h2>add a new</h2>\n      {/* Muotoa {Form()} käytetty funkiton kutsussa sillä muoto <Form /> lopetti inputin focusin\n      eli yhden kirjaimen jälkeen ei voinut kirjoittaa enempää klikkaamatta kenttää uudestaan  */}\n      {Form()}\n      <h2>Numbers</h2>\n      <List foundPersons={foundPersons} removePerson={removePerson} />\n    </div>\n  )\n}\n\nconst updateMessage = (setMessage, text, error) => {\n  const newMessage = [text, error]\n  setMessage(newMessage)\n  setTimeout(() => {\n    setMessage(null)\n  }, 4000)\n}\n\nconst List = ({ foundPersons, removePerson }) => {\n  return (\n    <div>\n      {foundPersons.map((person) => (\n        <div key={person.id}>\n          {' '}\n          {person.name} {person.number}{' '}\n          <button onClick={() => removePerson(person.id)}> delete </button>\n        </div>\n      ))}\n    </div>\n  )\n}\n\nconst Field = ({ name, value, changeHandler }) => {\n  return (\n    <div>\n      {name}: <input value={value} onChange={changeHandler} />\n    </div>\n  )\n}\n\nconst positiveMessageStyle = {\n  color: 'green',\n  backround: 'lightgrey',\n  borderStyle: 'solid',\n  padding: 10,\n  fontStyle: 'cursive',\n  fontSize: 20,\n}\nconst negativeMessageStyle = {\n  color: 'red',\n  backround: 'lightgrey',\n  borderStyle: 'solid',\n  padding: 10,\n  fontStyle: 'bold',\n  fontSize: 20,\n}\n\nconst Notification = (message) => {\n  if (message.message === null) {\n    return null\n  }\n  if (!message.message[1]) {\n    return <div style={positiveMessageStyle}>{message.message[0]}</div>\n  }\n  return <div style={negativeMessageStyle}>{message.message[0]}</div>\n}\n\nconst Find = (search, persons) => {\n  return persons.filter((person) => person.name.match(search))\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}